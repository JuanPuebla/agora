Release notes for Agora (http://agora.xtec.cat)

More information on each of the fixes can be found in the project
development home at https://github.com/projectestac/agora

Changes in progress
---------------------------------------------------------------------------------------



Changes 14.06.02
---------------------------------------------------------------------------------------
MOODLE 2
- Rcontent: Delete parent redirection on Rcontent activities

ZIKULA 2
- IWjclic: Fixed incorrect field name in table definition of IWjclic_sessions


Changes 14.05.28
---------------------------------------------------------------------------------------
GENERAL
- DataCopy: Added script to copy contact info from Moodle 1.9 services to Moodle 2 in agoraportal

MOODLE 2
- Solved MDL-39740 Updating grade_item idnumber doesn't update course_module idnumber
- Changed loglifetime from 365 to 0 to avoid delete them (for learning analytics project)
- Solved MDL-45480 Mod completion cannot be changed on certain cases
- Jclic module updated to the last version (0.2.3+)
- Geogebra module updated to the last version (0.2.5+)
- Format simple improvements showing custom images and solving duplicity of topic zero
- Marsupial modules updated to the last version (2.0.5+)
- Updated catalan translation (27-05-2014)

PORTAL
- Agoraportal: Added ability to show and delete subdirectoris in Moodle repository
- Agoraportal: Created Nodes service and changes in module tables
- XtecMailer: Synced code between portal, zikula2 and La prestatgeria
- Users: Changed default hash method to md5

ZIKULA
- News: Fixed AJAX error with modern browsers

ZIKULA 2
- fix.php: Fixed creation of log file in production environment
- Users: Fixed export of users to CSV file
- Users: Changed default hash method to md5
- XtecMailer: Synced code between portal, zikula2 and La prestatgeria
- AdminMessages: Fixed name for URL (broken with catalan translation)
- News: Fixed view of archived news after Zikula 1.3.7 upgrade


Changes 14.04.09
---------------------------------------------------------------------------------------
MOODLE 2
- Tiny_MCE Wiris Replaced wrong ampersand
- added TreeMenu.js
- Solved error with activities that lasts more than 99 seconds saving total_time in seconds instead of miliseconds. Now the limit is about 27 hours per activity
- Updated Jclicplugin.js to the last version
- Solved duplicity of topic zero in Simple course format
- Fixes and improvements in table styles

PORTAL
- Upgraded to Zikula 1.3.7
- Minor improvements to catalan translation
- IWstats: Improved collection of data
- Profile: Removed module as it is not used
- Removed install.php

ZIKULA
- Added protection against blind SQL attacks
- IWstats: Improved collection of data
- IWstats: Reduced summarize days to 3

ZIKULA 2
- Upgraded to Zikula 1.3.7
- Minor improvements to catalan translation
- IWagendas: Fixed quotes that caused an error in apache log
- IWstats: Improved collection of data
- IWnoteboard: Fixed non existing member class call
- Minor improvements to filetheme.php
- IWxtec: Updated links to intraweb.xtec.cat
- IWbluegraceAgora: Updated links to intraweb.xtec.cat and fixed incorrect load in filetheme.php
- IWxtec2: Updated links to intraweb.xtec.cat and fixed loading of images in CSS
- Upgrader: Converted to unattended
- Charset fix: Several improvements
- Upgrader: Improved script and moved to just one file
- Removed install.php
- Pages: Changed url module from 'pages' to 'pagines' in catalan translation (full module regeneration required)


Changes 14.03.12
---------------------------------------------------------------------------------------
GENERAL
- Added styles in portal for error.php

MOODLE 2
- Fix for correct index detection when there's more than 1 Moodle in an Oracle instance
- Hotpot report solved CONTRIB-4910
- Repaired the display of hidden sections on simple course format
- Debug feature enabled for all siteadmins outside agora
- Re-added Catalonia to countries list

ZIKULA 2
- Avoid automatic change of icon order in admin tabs
- Added cleanup of temporary files to cron
- Added script to fully regenerate module information from filesystem
- Updated module description of some modules
- Minor improvements to catalan translation


Changes 14.02.26 codename sarjona
---------------------------------------------------------------------------------------
MOODLE 2
- Upgrade Moodle2 to 2.4.8 version which includes:
-- Update QV module
-- Update of Wiris quizzes question types
-- Update of journal module
-- Update of hotpot module and question format
-- Update of format simple and Wiris plugins
-- Update of Marsupial to the latest version
-- Update of Admin tools third party modules
-- Update of language files
-- Update Simple course format
-- Delete patch MDL-27071 already exists on moodle 2.4.8
- Added debug by session feature
- Import19: Don't show import section if tables of Moodle 1.9 are not present and avoid current error
- Protect cron to run twice at the same time
- MUC for questiondata is now configured and is set for separately for every Moodle instance
- Added repairing scripts for duplicates of course_completion and quiz_attempts
- Cleaning of local/agora cron
- Updated catalan translation of questiontypes of the Open University (gapselect, ddimageortext, ddmarker and ddwtos)
- Preparing cron to run from CLI

ZIKULA
- Removed module iw_moodle to connect to Moodle 1.9

ZIKULA 2
- IWdocmanager: Fixed deletion of files due to unscaped javascript text
- IWdocmanager: Aesthetical & usability improvements


Changes 14.02.05
---------------------------------------------------------------------------------------
GENERAL
- Added phpsysinfo to get status information from the web servers
- createSchoolsListsFiles.php: Removed Moodle 1.9 stuff
- statistics.php: Removed Moodle 1.9 stuff
- htaccess: /moodle2 now redirects to /moodle

MOODLE 2
- Repairing of course_section duplicates
- Instaled some questiontypes of the Open University (gapselect, ddimageortext, ddmarker and ddwtos)
- Updated Questionnaire from version 2.3.3 to version 2.4.2
- Bug repair: MDL-43511 do not cache the MUC cache in question code

ZIKULA
- Improved protection against XSS vulnerability

ZIKULA 2
- Fixed incorrect saving of IWmain params
- Updated URL of Intraweb project
- Fixed siteoff template not loading login form in Firefox

PORTAL
- Removed upgrade.php because it is no longer necessary
- Agoraportal: Removed references to /antic
- Agoraportal: Fixed bcc message when activating service
- Agoraportal: Removed Moodle 1.9 stuff
- Agoraportal: Updated automatic e-mail messages
- Fixed incorrect saving of IWmain params
- Fixed siteoff template not loading login form in Firefox
- Agoraportal: Improved function listDataDirs
- IWportal: Reduced font-size to 13 pixels


Changes 14.01.15
---------------------------------------------------------------------------------------
GENERAL
- Access to Moodle 1.9 changed from /antic to /copiaseg
- checkFiles.php: Added server time

MOODLE 2
- Coursequotas: Fixed error in temp and trashdir info for non-Agora installs
- GeoGebra: updated module to last version (0.2.5rc)
- Bug correct: MDL-27071 Oracle cannot cope withan IN operator with more than 1000 conditions in it
- site-config.php: Removed exception for usu1

PORTAL
- Agoraportal: Moodle sites are not listed in public list

ZIKULA
- Files: Fixed AJAX error when uploading files or when creating folders in Chrome
- News: Fixed AJAX error with modern browsers

ZIKULA 2
- IWagendas: Fixed images not being found when module is loaded as default module
- IWstats: Fixed javascript calendar not being loaded


Changes 13.12.16
---------------------------------------------------------------------------------------
GENERAL
- replaceMoodle.php: Changed required service from Moodle 1.9 to Moodle 2

MOODLE
- Added code to disconnect usu1

MOODLE 2
- Reviewed code for reseting assign grades to include also recovergradesdefault parameter (https://tracker.moodle.org/browse/MDL-41877)
- Coursequotas: Added temp and trashdir info for non-Agora installs and minor text format changes
- Coursequotas: Fixed error when counting used space in course and in front page
- Question: Modified to prevent Google Chrome from translating the question identifier (a,b,c..)
- Modified patch in email_to_user function to prevent moodle to generate notices when $CFG->apligestmail is not set
- Fixed upgrade assignment code section. Now it catches exceptions and removes unused duplicated sections that probably caused the exception in the first place.
- Updated Marsupial modules to v2.0.4
- site-config.php: Added prefix exception for usu1 (PRO)
- Fixed bug with EOICampus module (pathway selection when editing)
- Updated catalan translation (11-12-2013)
- Blocked access to install functions

PORTAL
- Upgraded to Zikula 1.3.6
- Removed updating of variables for Downloads module when activating an Intraweb (module's been removed)
- Allow admins to access to updateDiskUse and to listDataFiles without checking IP
- Don't send e-mail of quotas for Moodle 1.9
- Fixed javascript error due to catalan translation
- Improvements to form for upload of big files
- Fixed activation of Intraweb sites (from now on, only Zikula 1.3)

ZIKULA 2
- Upgraded to Zikula 1.3.6
- IWstats: Fixed creation of listeners to collect stats
- IWmoodle: Fixed dropdown group menu in synchronization section
- Added script to fix charset problems in some Zikula databases
- Files: Fixed wrong check for directory "users"
- Groups: Fixed javascript error due to catalan translation
- IWbluegraceAgora: Fixed Smarty templates
- IWMyRole: Ensure block "MyRole" is able to load when the user doesn't belong to any group (prevents admins suicides)


Changes 13.11.13
---------------------------------------------------------------------------------------
GENERAL
- createServices.php: Fixed bug and removed config to /moodle2
- statistics.php: Fixed data from Zikula 1.3 not being collected
- works.php: Support for Zikula 1.3 and moved testing from Moodle 1.9 to Moodle 2

ZIKULA
- Upgraded to version 1.2.9
- Fixed XSS vulnerability

ZIKULA 2
- IWusers: Fixed some module variables not being called correctly, as they belong to IWusers instead of IWmain
- IWusers: Fixed warning when accessing to users module without being logged in
- IWmoodle: Fixed dropdown group menu in synchronization section
- News: Improvements to user interface to create news
- Files: Several usability improvements

MOODLE 2
- Fixed bug on submissions count shown in My Moodle summary page
- Coursequotas: Duplicated files in a course are only counted once
- Coursequotas: Added usage info of temp and trashdir directories
- Forums: Fixed error in My profile > Forum Posts > Discussions (https://tracker.moodle.org/browse/MDL-39788)
- Fixed bug on simple course format related with save images when editing
- Fixed bug with modinfo corruption (Fix for https://tracker.moodle.org/browse/MDL-36789)
- Reviewed rcommon (Marsupial) code to avoid some problems with PostgreSQL (patch reported by UPCnet)
- Enabled enablegroupmembersonly experimental parameter
- Fixed Moodle footer appearing over "New activity or resource" popup Window
- Fixed bug on overviewnumpostssince count shown in My Moodle Page
- Hidden Alfresco repository (only visible for xtecadmin or when it's enabled)
- Showed again Appearance | Default My home page parameters page
- Hidden delete button for admins on Plugins | Filters | Manage filters page
- Updated catalan translation (13-11-2013)

PORTAL
- Upload files: File name can reach 100 characters
- Upload files: Improved some messages for users
- Only admins are allowed to see authors' names in logs
- Agoraportal: Fixed grammar error and improved message to deny increase of quota
- Agoraportal: When a manager name is an email, the text after the at sign (@) is removed


Changes 13.10.16
---------------------------------------------------------------------------------------
GENERAL
- Fixed bug in Agora cookie that caused to use always file allSchools.php

MOODLE 2
- Fixed bug when reseting assign grades (https://tracker.moodle.org/browse/MDL-41877)
- Installed Wiris Quizzes (version 3.23.0.0749)
- Participants count correction shown in Grading summary page (https://tracker.moodle.org/browse/MDL-38128)
- Added tool uploadcourse for bulk courses creation
- Added tool uploadcoursecategory for bulk course categories creation
- Updated Marsupial modules to v2.0.3
- Odisseagtafsync: Enrolments from file are now done with 'Manual' plugin
- Updated catalan language pack (15-10-2013)
- Updated spanish language pack (15-10-2013) and fix for https://tracker.moodle.org/browse/MDL-30788

ZIKULA
- iw_moodle: Fixed group list in enrolment
- iw_moodle: Fixed connection to Moodle 2 when there is no Moodle 1.9

ZIKULA 2
- AdminMessages: Fixed translation of name for URL
- IWmoodle: Fixed configuration for connection to Moodle 2
- IWmoodle: Removed code to connect to Moodle 1.9 (for it is not supported)
- IWmoodle: Fixed permission and set connection to persistent
- IWmoodle: Fixed group list in enrolment
- IWmoodle: Fixed enrolment in Moodle from Intraweb
- IWmoodle: Fixed users created from Moodle not being activated
- Upgrader: changed IWgroups by Groups in menu because iw_groups no longer exists
- Groups: fixed group creation link not being shown
- Theme IWxtec2: fixed alignment of icons in admin tabs
- Added legacy icons for compatibility when upgrading
- IWforms: Fixed litle bugs in manage functionalities
- IWforms: Added users filter functionality


Changes 13.09.23
---------------------------------------------------------------------------------------
GENERAL
- Updated cron URL for Moodle 2 after URL change

MOODLE 2
- Changed cron order to delete files from temp before uppgrading assignments (to avoid problems with course sections) and reviewed code to avoid warning when trying to delete '.' folder
- Fixed bug for JClic activities when upgrading from Moodle 1.9 empty maxgrade (reported by Ferran Recio - UPCnet)
- Fixed bug related with SMART Board incompatibility with Drag&Drop AJAX (https://tracker.moodle.org/browse/MDL-37528)
- Added first version of the replacextec tool
- Added first version of the odisseagtafsync tool
- Added Marsupial rgrade block (developed by Text-La Galera)
- Added ForzarGuardar parameter to rcontent module
- Fixed bug with rscorm to let update the launch when it has been changed (patch reported by Santillana)
- Upgraded qformat_hotpot from v2.0.8 to v.2.0.13 to fix some importing problems
- Upgraded geogebra module to v0.2.4 RC version
- Updated catalan translation (19-09-2013)

ZIKULA
- Added ability to reduce the size of right column when it is empty in themes iw_xtec and iw_xtec2
- iw_bluegrace_agora: Reduced size of input field for login
- Validation of users with imported salted passwords from Moodle

ZIKULA 2
- Imporved module IWforums and added the functionality of setting messages in top of messages list
- Added missing lang file for editor Xinha which threw a popup error window in some systems
- Added ability to reduce the size of right column when it is empty in themes IWxtec and IWxtec2
- Validation of users with imported salted passwords from Moodle


Changes 13.07.10
---------------------------------------------------------------------------------------
GENERAL
- Added muc directory and cacheconfig.php to checkFiles.php
- Added code to block access during stress tests

MOODLE
- Fixed backup copies not being automatically removed when moving to Moodle 2

MOODLE2
- Changed lib/moodlelib.php to add odissea auth method
- Fixed whitespaces in langlist
- Added support for SSO from Zikula 1.3
- Added removal of temp files to local/agora/cron.php
- Fixed course format 'Senzill per temes' not being able to go to next topic
- Updated catalan translation files (05-07-2013)
- Fixed theme selector to let select a theme when !is_agora
- Fix for style in module page which is incorrectly overriden by style in rcommon block

PORTAL
- Added catalan name of module Users to https login
- Removed shortening of city name when activating moodle service

ZIKULA2
- Added catalan name of module Users to https login


Changes 13.06.21
---------------------------------------------------------------------------------------
MOODLE
- Fixed "inconsistent datatypes: expected - got CLOB" bug when creating questionnaire backup.
- Revised procedure to create a backup of the specified course without user information (1.9 -> 2 import tool).

ZIKULA2
- Fixed connection to DB when parameters are not standard
- Improvements to styles of theme IWxtec
- Fixed uninstall of module Quotes
- Added https login


Changes 13.06.14
---------------------------------------------------------------------------------------
GENERAL
- Modified createSchoolsListsFiles.php to call Moodle 2 crons even if its URL ends with /moodle2
- dblib-mysql: added info of intranet version to cookie
- replaceMoodle: added support for Moodle 2 and any kind of text replacement
- chekFiles.php: shows web server name

MOODLE
- Added permision to xtecadmin to access to scheduled backup parameters

MOODLE2
- Fixed font face "lletra lligada", which only worked in theme design mode
- Fixed course import when category names in Moodle 1.9 have some special chars
- Fixed javascript interference from theme xtec2 to other themes. Credits to mTorres for the fix (https://github.com/projectestac/agora/issues/14)
- Added Single Sign On with IWmoodle for Zikula 1.3
- Reviewed import19 tool to load Moodle 1.9 courses only when the user has the capability to create courses in some category
- Added link to Àgora and Moodle portal from XTEC2 footer
- Updated GeoGebra module
- Grant access to langimport subpackage only to xtecadmin user
- Updated catalan translation files (11-06-2013)
- Added translations files for Arabic, Greek, Basque, Galician, Italian, Japanese, Korean, Dutch, Portuguese, Russian, Swedish, Urdu and Chinese
- Fix for style in module quiz which is incorrectly overriden by style in rcommon block

PORTAL
- Updated messages for activation of new services
- Commented code to syncronize Intraweb and Moodle 2 (no longer needed)
- Moodle 1.9 no longer needed to request marsupial
- Updated Terms of Service

ZIKULA
- Fixed iwcron.php not calling properly some maintenance functions
- Fixed potential security issue reported by CESICAT

ZIKULA2
- Added directory zikula2 to start upgrade of Intrawebs


Changes 13.05.13
---------------------------------------------------------------------------------------
MOODLE2
- Added SVG icons for rcontent and rscorm
- Added cron code to upgrade upgradable assigments.
- Course import from 1.9 now allows import of all courses where user has capability 'moodle/site:backup'
- Course import from 1.9 now allows to select target category
- Fixed code in theme xtec2 which may interfere javascript in other themes
- Reviewed MUC configuration to avoid use agora_store for questiondata cache
- Installed alpha version of the GeoGebra module
- Forced default timezone to Server's local time (to avoid problems with quizzes)

PORTAL
- Fixed managers not being able to ask for a new service when service 'moodle' doesn't accept new registers


Changes 13.04.26
---------------------------------------------------------------------------------------
GENERAL
- First version of utility to massive creation of Moodle 2 services

MOODLE2
- Fixed error when building category tree
- Import utility now removes backup copies after restoration
- Installed QV module
- Reviewed default enrol cohorts behaviour to let everybody with cohort:view capability enrol system cohorts
- Added CFG param to settings.php to define default blocks when creating a course
- Hidden Cache plugins section (only visible for xtecadmin)
- Added $CFG->altcacheconfigpath to have only one cache config file for all instances (instead of having one for each site in moodledata/usuX/muc/config.php)
- Hidden all themes to avoid schools to change it. Now, only xtec2 and mymobile themes are visible
- Fixed "assignments appear at the end after upgrading them to 2.2".
- Rush hours are now configurable
- Blocked course restoration in rush hours
- Logo set in theme xtec2 is now uploaded into Moodle files
- Removed chat module to avoid performance issues
- Added marsupial module for Moodle 2.4


Changes 13.03.22
---------------------------------------------------------------------------------------
PORTAL
- Allow access to file manager to schools with only Moodle 2 (no Moodle 1.9 required)

MOODLE2
- Fixed bug in db authentication related with Intraweb users integration
- Upgraded Moodle 2.4.0 to 2.4.3
- Fixed size of input files of login block
- Added temporary debug code in coursequotas
- Updated EOICampus module version to fix problem when restoring courses from Moodle 1.9

ZIKULA
- Fixed call to stats summarize function in iwcron.php
- Removed https in login block


Changes 13.03.15
---------------------------------------------------------------------------------------
GENERAL
- Hardened security of the multisite cookie
- Modified replaceMoodle.php to be executed from the server
- $agora['config']['xtecadmin'] is always encrypted
- Added .htaccess password protection to html/config/

PORTAL
- Force usage of https when users clic to menu option to log in
- Added https login in portal for Zikula 1.3.x
- Automatic e-mails are BCC sent to site e-mail instead of CC sent to current admin user
- Fixed error when users accept to be a manager (function managerChoose())
- Random password generated and sent via e-mail when a service is activated
- Added ability to execute SQL to portal database
- Schools that withdraw the services can now ask for them again
- When a user is proposed as a manager, now receives a notification e-mail
- Defined new state for services: deactivated
- Messages sent to Moodle or Intraweb from portal are now saved into session to avoid problems with special chars in Intraweb

MOODLE 2
- Added CSS style for "Defined in config" params and improved styles for input fields
- Released 0.2.3 JClic version and updated version.php file (changes has been included some weeks ago)
- Fixed bug when deleting jclic activities and enableajax is enabled
- Fixed bug with assign files when submitting a file with the same name but different content (https://tracker.moodle.org/browse/MDL-38091)
- Improved efficiency of coursequotas report
- Fixed bug with import19 tool to let Moodle 2 admins restore all Moodle 1.9 courses (even if they aren't admins in Moodle 1.9)
- Improvements to CSS of theme xtec2 to improve usability of GradeBook and in calendar selector in "New assign"
- Updated Journal module to 1.8.1 version
- Fixed bug when deleting group (https://tracker.moodle.org/browse/MDL-37098)
- Updated catalan translation (13-mar-2013)

ZIKULA
- Added call to stats summarize function in iwcron.php


Changes 13.02.12
---------------------------------------------------------------------------------------
GENERAL
- Added gathering of users active last 30 and 90 days in Moodle 1.9. Also fixed in 2.4.
- Added extra-security-check

MOODLE
- Changed value to backup_sche_users parameter to avoid Odissea problems when restoring courses directly from Moodle 1.9 to Moodle 2

MOODLE 2
- Fixed sending e-mail using XTEC Web Service
- Added course format "Senzill per temes"
- Performance improvements to coursequotas report plus code organizational changes
- Added SVG icon for hotpot, questionnaire and journal activities
- Fixed bug in db authentication related with Intraweb users integration
- Added a restriction to avoid admin user changes its own username (admin has to be always admin!)
- Fixed bug to let edit user profile from participants page of a course (https://tracker.moodle.org/browse/MDL-36674)
- Updated translation for Moodle 2.4 (version date: 13-feb-2013)
- Fixed bug when openning URL in new window (https://tracker.moodle.org/browse/MDL-37015)

ZIKULA
- Fixed statistics summary process

PORTAL
- Fixed deletion of backup files from portal when school has no Moodle 2
- Increased version of agoraportal in order to add fields to stats tables
- Fixed incorrect filtering in 'Sol·licituds'


Changes 13.01.14
---------------------------------------------------------------------------------------
GENERAL
- Added rule in .htaccess to fix logout when accessing to /moodle/my

MOODLE
- Fixed bug with sessions_summary initialization at JClic module

MOODLE 2
- Updated Wiris version for Moodle 2.4
- Fixed bug in hotpot module: https://tracker.moodle.org/browse/CONTRIB-3896
- Fixed hand-write font family (aka 'lletra lligada') in Moodle 2.4
- Fixed YIU problems in EOICampus module (for Àgora-EOI)

ZIKULA
- Removed theme voodooDolly. No schools use it
- Removed theme iw_mobile


Changes 12.12.28
---------------------------------------------------------------------------------------
MOODLE 2
- Updated Moodle version to 2.4.0
- Updated hotpot module to 3.0.52
- Updated questionnaire to 2.3.3
- Updated Wiris CAS and Editor to 3.19.2 (this version isn't yet adapted for Moodle 2.4)


Changes 12.12.12
---------------------------------------------------------------------------------------
GENERAL
- Added param to allow not updating dayly stats of Moodle 1.9 if they already exist
- xtecSchool cookie name is now a param in html/config/config.php

MOODLE
- Added server name to adodberror log to know which web server was implied
- Fixed database ordering problems notified by Odissea team (http://tracker.moodle.org/browse/MDL-33603)
- Fixed problem when deleting some of the user responses in a choice activity (only affects to multi-site instances)
- Showed $CFG->dataroot/climaintenance.html file when exists (at the moment, it will be used in demo site but, if necessary, it can be used in the remaining multi-sites)

MOODLE 2
- Fixed course order in courses tab of coursequotas. Units were not being considered when ordering.
- Added missign Catalan translation files to questionnaire module
- Added support for https authentication using BigIP
- Adapted source to rename logo_agora to logo_main in xtec2 theme (to make it more generic)
- Added user bulk function to capitalize names and surnames
- Reviewed function create_user_record in lib/moodlelib.php to capitalize user name and surname
- Added CFG->userquota = 0 to avoid the private files area

PORTAL
- Updated message sent to users when a new service is activated


12.11.21
---------------------------------------------------------------------------------------
GENERAL
- Changed OCI connections to persistent (oci_pconnect()) in dblib-mysql.php

PORTAL
- Updated automatic e-mail sent when activating a new service

MOODLE
- Added is_agora() check to backup_agora.php to enable Moodle to import when is not Àgora
- Reviewed coursequotes to make it works with single installations (like Odissea)
- Fixed bug with database activities to avoid problem with data visualization when entrieslefttoadd parameter is defined

MOODLE 2
- Modified the file auth/db/auth.php to make possible to validate simultaniously through the intranet, simulating a SSO validation, and the typical Moodle authentification form using the External Database authentification method
- Fixed bug when restoring directly big courses from Moodle 1.9 (the course filename was different because the creation took more than one minute).
- Fixed hardcoded prefixes in import19
- Added is_agora() checks to import19 to enable Moodle to import when is not Àgora
- Fixed bug related with guest viewing folders (http://tracker.moodle.org/browse/MDL-34338)
- Added some restrictions to disable specific modules, like eoicampus
- Fixed bug in JClic module related with users reporting (only first page was showed)
- Reduced from 4 days to 1 the waiting time to purge draft files
- Increased default repository timeout from 30 to 150 to let downloading bigger files
- Added $CFG->agora_draftfilepurgeage parameter to let configure the waiting time to purge files (default Moodle value was 4 days but now it's only 1 day if $CFG->agora_draftfilepurgeage is not specified).
- Installed first version of the eoicampus module

ZIKULA
- Adapted the module IWmoodle to be consistent with the new validation possibilities
- Fixed incorrect update of upload_dir in formicula to fix a lot of errors in error_log temp files
- iwcron: added removal of temp files
- In 'Go to Moodle' Block now it is possible to select if the school have or not have the version 2.x of Moodle active in order to choose the correct folder in server


12.10.24
---------------------------------------------------------------------------------------
GENERAL
- Fixed error while picking up Moodle 2 number of access

MOODLE
- Fixed some Oracle bugs in GeoGebra module related with ` character

MOODLE 2
- Updated coursequotas report. Now is ready for production.

ZIKULA
- IWstats: Added the posibility to choose the user information to show in online users block


12.10.10
---------------------------------------------------------------------------------------
MOODLE
- Updated rcommon block to fix bug related with deleted and non confirmed users (http://projectes.lafarga.cat/projects/marsupial/tracker/850/2414/detail)
- Updated rcontent module to update URLVIEWRESULTS fields sizes for large urls
- Added file to automate course creation (for Àgora-Formació)

MOODLE 2
- Fixed bug in /moodle/my related with Oracle reserved word (http://tracker.moodle.org/browse/MDL-35387)
- Updated wiris version to 3.18.2 and hidden Wiris buttons when the filter is not enabled.
- Fixed bug to let navigation in courses with COURSE_DISPLAY_SINGLEPAGE when a section is marked as current.
- Undone change because the patch specified in http://tracker.moodle.org/browse/MDL-29432 create problems restoring other backups.


12.10.03
---------------------------------------------------------------------------------------
PORTAL
- Increased maximum upload size of big files to 100 MB
- Fixed error shown when not able to send an e-mail

MOODLE 2
- Enabled spell checker for tiny_mce editor (http://tracker.moodle.org/browse/MDL-34674)
- Removed contextmenu plugin of tiny_mce editor to normally check spelling with right click button
- Enabled purgecaches without login (to update automatically changes in xtec2 theme)
- Updated version from 2.3.1 to 2.3.2. Updated also questionnaire and journal modules to latest version



12.09.19
---------------------------------------------------------------------------------------
MOODLE
- Updated rcommon and my_books blocks to 1.6.1 version
- Fixed bug related with sending email during users signup adding $CFG->noreplyaddress to settings.php

MOODLE 2
- Improved XTEC2 theme to redessign tab options, underline theme titles and review color button in file selector.
- Fixed bug related with sending email during users signup adding $CFG->noreplyaddress to settings.php


12.09.05
---------------------------------------------------------------------------------------
MOODLE
- Updated rcommon and my_books blocks to last version (1.6.0-beta ++)
- Updated rgrade to last version to fix some problems and add new functionalities

MOODLE 2
- Fixed bug with filtering in analysis report (http://tracker.moodle.org/browse/CONTRIB-3896)
- Fixed bug with cohorts when adding users (http://tracker.moodle.org/browse/MDL-35270)


10.08.27
---------------------------------------------------------------------------------------
GENERAL
- Fixed URL for Moodle 2 in createSchoolsListsFiles.php

MOODLE
- Installed GeoGebra module (http://moodle.org/plugins/pluginversions.php?plugin=mod_geogebra)

MOODLE2
- Updated Moodle version to 2.3.1
- Updated hotpot module to 3.0.43
- Updated hotpot question format to 2.0.8
- Updated journal to 1.6
- Updated questionnaire to 2.3.1
- Updated assign to moodle 2.3.1+ (Build: 20120823)
- Installed Wiris CAS and Editor 3.17.23
- Changed default coursedisplay to show only one section per page and showed current section if none is selected
- Added Catalonia to countries list
- Improvements to theme xtec2
- Added param to import external CSS in theme xtec2
- Changed block image to fold/unfold block by an HTML entity
- Implemented file upload blocking when disk quota is exceeded
- Fixed problem duplicating quizzes (http://tracker.moodle.org/browse/MDL-29432)
- Fixed bug with Intranet user sincronization


12.08.01
---------------------------------------------------------------------------------------
GENERAL
- Added key in getAllSchools return array
- Modified the cron list adapting the url with antic or moodle, depending on if the schools have or not the service Moodle2 active
- Updated URL to access to Àgora web service to get school info
- Added check for Àgora web service

PORTAL
- Fix problem in Moodle and intranet join. Now can join the Moodle and the intranet for any version of Moodle
- Added the possibility to recalc the disk consume by clients managers
- Added function to access directly to terms of service without being logged

MOODLE
- Updated Moodle from 1.9.12 to 1.9.19+

MOODLE2
- Fixed bug with advices block
- Added french and german languages
- Updated catalan language
- Added library jpgraph, required by quota reports (which is not added yet)
- Updated Hot Potatoes module to 3.0.42. Fixes several bugs
- Import courses from 1.9: fixed bug with siteadmin and managers if the user doesn't exist in Moodle 1.9

ZIKULA
- In module IWmoodle protect inscriptions in courses if the inscripctions manual method is not defined


12.07.17
---------------------------------------------------------------------------------------
GENERAL
- Added code to restrict access to all services during stress tests
- Added file with code to change of /antic to /moodle in moodle 1.9

PORTAL
- Use Oracle instance and MySQL dbHost from database instead of calculate it in SQL execution
- Deactivated usage of APC cache with Doctrine
- Added link to allow managers to manually recalc the disk consume

MOODLE2
- Added option to restore courses directly from Moodle 1.9 (beta version, only accessible for xtecadmin)
- Added additional check to avoid problems when restoring JClic activities from Moodle 1.9 with incorrect URL
- Fixed bug related with calendar (when calendar_adminseesallis enabled) - http://tracker.moodle.org/browse/MDL-32340
- Reviewed restriction to avoid admins or managers edit user profiles (except xtecadmin)

ZIKULA
- Changed default params to IWmoodle
- Added params to connect to Moodle 2


12.07.10
---------------------------------------------------------------------------------------
GENERAL
- cronMoodle2 and updateMoodle2 will generate /antic URLs
- Improved the way Oracle instance names are calculated. Also fixed special case for Àgora-EOI
- Removed legacy dblib.php
- Added Moodle2 to checkFiles.php
- Removed params not being used in config.php
- Added diskConsume also to moodle_stats_day, moodle_stats_month and moodle2_stats_month tables

PORTAL
- Added diskConsume also to moodle_stats_day, moodle_stats_month and moodle2_stats_month tables
- Changed prefix for sessioncookie to make difference between Moodle 1.9 and 2
- Fixed synchronization between Moodle 2 and Intranet
- Fixed sending advices to intranet
- Activated usage of APC cache with Doctrine
- Added param to control persistent connections to Oracle DB's
- Fixed execution of SQL in intranet sites from the portal
- Updated terms of use of Agora services

MOODLE
- Adapted admin/replace.php to replace also content in label, forum, resources, quizzes...

MOODLE2
- Added additional check to avoid problems when restoring JClic activities from Moodle 1.9 with incorrect URL


12.07.04
---------------------------------------------------------------------------------------
GENERAL
- Changed .htaccess and config files to add exceptions for Moodle 2 testing (moodle2 -> /moodle and moodle -> antic)
- Added creation of files cronMoodle2.txt and updateMoodle2.txt in adminInfo

PORTAL
- Redesigned service icons
- Fixed error after managers accept or refuse being managers
- Fixed upgradeDiskUse()
- Changed AuthLDAP module to use new LDAP server
- Changed e-mail sent to users after creating moodle2 services
- Updated terms of use

ZIKULA
- Changed AuthLDAP module to use new LDAP server


12.06.27
---------------------------------------------------------------------------------------
MOODLE
- Reviewed style for dimmed links
- Changed ldap/auth.php to connect to OID LDAP server (instead of SUN LDAP server)

PORTAL
- Fixed bug with xtecmailer
- Reviewed crons to fix problems detected with portal update


12.06.20
---------------------------------------------------------------------------------------
MOODLE
- Fixed bug with user export to CSV: added empty fields also to the file
- Added password field to bulk download

MOODLE2
- Changed simple to multi installation

PORTAL
- Updated to 1.3 Zikula version


12.06.14
---------------------------------------------------------------------------------------
MOODLE2
- Uploaded first version of Moodle 2 (single installation with USU2) for testing it


12.05.30
---------------------------------------------------------------------------------------
PORTAL
- Improved efficiency when loading form for uploading big files to Moodle

MOODLE
- Fixed bug to get aplication name and replyTo address from configuration (instead of having the "AGORA" default values directly in the source code)
- Updated marsupial to v1.5.2
- Added marsupial_rgrade block (developed by Text-La Galera)


Changes 12.04.02
---------------------------------------------------------------------------------------
GENERAL
- Fixed config/statistics.php: number of users of intranet where not being updated

MOODLE
- Added patch for MSA-11-0031 (http://moodle.org/mod/forum/discuss.php?d=188313)
- Added patch for MSA-11-0036 (http://moodle.org/mod/forum/discuss.php?d=188318)
- Added patch for MSA-11-0038 (http://moodle.org/mod/forum/discuss.php?d=188320)
- Added patch for MSA-11-0045 (http://moodle.org/mod/forum/discuss.php?d=191754)
- Added patch for MSA-11-0007 (http://moodle.org/mod/forum/discuss.php?d=194015)

PORTAL
- Removed old theme (iw_xtec_2) not used


Changes 12.03.14
---------------------------------------------------------------------------------------
GENERAL
- Removed legacy params from config files
- Fixed error.php to use images, CSS and JS from portal
- Fixed detection of non-existing services, which are redirected to error.php

PORTAL
- Started work on function agoraPortal_admin_listDataFiles
- Added Pages module
- Added images, CSS and JS from old acces directory
- Minor improvements to request system. Also removed unnecessary code.

MOODLE
- $CFG->iseoi moved to database from settings.php
- Updated marsupial version to 1.5.2 (beta) to fix some bugs in rcontent and rscorm modules from Marsupial (related with wsSeguimiento, the monitoring web service)


Changes 12.02.17
---------------------------------------------------------------------------------------
GENERAL
- works.php: Changed the way to determine what IW DDBB servers and MDL instances will be used to check status.
- Removed legacy folders: acces, adminTools and eines

PORTAL
- Fixed bug when connection MDL - IW. Value for db name in mlconfig_plugins was incorrectly set.
- Added param to require a maximum of free quota in order to ask for an increase.
- Link to requests form in MyAgora is only shown when user can ask form more space.
- Edition of client requests now sends e-mail to client code and managers.

MOODLE
- Added links to courses and categories in the coursequotes report page.


Changes 12.01.18
---------------------------------------------------------------------------------------
GENERAL
- Reviewed $agora['server']['ca_bundle'] file path to put the correct one (missing html/)
- Removed 1==0 to send emails to schools and uncommented $CFG->diskPercent to enable user quota usage (to avoid users upload files when the quota is exceeded).
- Added ability to works.php to check only current web server, not all the apps.

PORTAL
- Fixed error in intranet function getFreeDataBase which caused incorrect detection of free DB's
- Added param maxAbsFreeQuota to configure the minimum absolute free quota to e-mail users
- Fixed error message due to check error when activating new services

MOODLE
- Reviewed questiontype bug to replace "temporary" solution by the "oficial" one (http://tracker.moodle.org/browse/MDL-29294)


Changes 11.12.14
---------------------------------------------------------------------------------------
GENERAL
- Improved works.php to check not only DB connections but also table access
- statistics.php: intranet stats were not collected correctly

PORTAL
- Minor improvements to quota messages sent to users

ZIKULA
- iw_jclic: fixed incorrect component in permission check


Changes 11.11.28
---------------------------------------------------------------------------------------
PORTAL
- Request system is ready for production
- Improved updateDiskUse, with better report to admins!

MOODLE
- Updated Wiris CAS and Editor to 2.3.5 and installed Wiris Quizzes (v1.4.5.39)
- Fixed "ORA-00932: inconsistent datatypes: expected - got CLOB" error with HotPot Quiz activity
- Fixed bug when there is no rscorm_scoes (in this case it's not necessary to return false)

ZIKULA
- Fixed problem during agenda fields modification


Changes 11.11.15
---------------------------------------------------------------------------------------
PORTAL
- Added function managerChoose which was lost in previous version

ZIKULA
- Fix admin login when site is off
- Improved module IWstats with summary features

MOODLE
- Fixed "ORA-00932: inconsistent datatypes: expected - got CLOB" error with HotPot Quiz activity
- Updated marsupial version to 1.5.1 (final release)


Changes 11.11.09
---------------------------------------------------------------------------------------
MOODLE
- Added stream_context parameter to SoapClient calls from marsupial-atria module to void problems with HTTPS connection and updated Atria URL from HTTP to HTTPS
- Added CURLOPT_CAINFO to validate certificates for all the HTTPS connections (like recaptcha when loginhttps=true)
- Applied patch to update new recaptcha domains (http://tracker.moodle.org/browse/MDL-27328)
- Updated marsupial version to 1.5.1 (beta release)

PORTAL
- Fixed some problems in updateDiskUse function and added debug parameter. On this version, the cron to index.php?module=agoraPortal&type=admin&func=updateDiskUse can be scheduled to test it (at the moment, the warning emails won't be sent)
- Upgraded version to 1.6 to get new tables for user's request system
- Added code of request system, but not working yet
- AuthLDAP: improved creation of clients. Now it's able to create clients later if there is any problem when users log in for the first time.

ZIKULA
- Minor improvements to theme iw_xtec2


Changes 11.10.26
---------------------------------------------------------------------------------------
GENERAL
- statistics.php: fixed using wrong connection to admin database to save stats info.
- statistics.php: Changed $agora['intranet']['adminuser'] by $agora['admin']['database']
- statistics.php: Intranet dbname is now built with userprefix + id
- statistics.php: Fixed incorrect dbhost in intranet (was used general dbhost)
- statistics.php: Added ability of execute only Intranet or only Moodle stats
- getFreeDB (dblib-mysql.php): Return only one record to improve SQL performance
- works.php nows tests all intranet databases (MySQL)

MOODLE
- Fixed bug in Marsupial users viewer
- Updated Marsupial module version to 1.5
- Added CURLOPT_SSL_VERIFYHOST=FALSE to avoid problems with CA when the connection is HTTPS (it can be tested, for instance, with the recaptcha if loginhttps=true)
- Changed temporally Atria URL from HTTPS to HTTP until problems with CA in some of the servers will be fixed

ZIKULA
- Fixed storing of sessions in filesystem


Changes 11.10.17
---------------------------------------------------------------------------------------
GENERAL
- Mails header set in settings.php
- Removed transition code for intranet dbhost. Now is set for all intranet services i DB.
- Added syncdata/sync/allSchools.php to checked files
- Added var to config.php: $agora['intranet']['userprefix']

PORTAL
- Script name (ubr_upload.pl) moved to config.php. Special care must be taken with this when building new version.
- Removed redundant include_once of env-config.php. Redundant require_once were removed some commits ago.
- Zikula now uses $agora['admin'][] array to connect to DB. Values must be changed in env-config.php !!
- Removed duplicated function connectExtDB (was in pnadminapi and in pnuserapi)
- dbHost of intranet is now correctly handled when adding services and connecting Moodle and Intranet
- Improved the way Zikula params were updated when creating a new intranet

MOODLE
- Fixed bug in marsupial state page when getting users with and without credentials
- Reviewed code to remove mlXXXX references and optimize SQL queries
- Fixed little bugs in marsupial block
- Hidden "Manage publishers" if there isn't any publisher and useAtria!=false
- Hidden "Syncronize with Atria" button when there is some publisher
- Fixed "ORA-00932: inconsistent datatypes: expected - got CLOB" error with assignments when ordering by comments



Changes 11.10.03
---------------------------------------------------------------------------------------
GENERAL
- statistics.php: Comented code to not check if school code exists (it always exists).
- Added var to config.php: $agora['intranet']['moodle_dbtype']
- dblib-mysql.php: added support for different DB server for each service

PORTAL
- Removed redundant require_once. Env-config is already loaded in Zikula config.
- Commented code to delete and create agoraPortal module. Those actions can be done, but nothing happens.
- Added field for dbhost for every service. Increased version number of agoraPortal.
- Database and server database can be edited.

MOODLE
- Fixed bug in data searches
- Rush hour don't affect to xtecadmin
- index_iw.php: Changed zikula login URL
- Reviewed rcontent to save view action into the Moodle log
- Updated rcommon to fix some minor problems related with publishers with only one book
- Added report option to check Marsupial service state


ZIKULA
- iw_moodle: fixed the list of countries.
- iw_moodle: default moodle lang can be set in multizk environments.
- iw_moodle: improved the ability to recognise and synchronize the same user in zikula and moodle.
- iw_moodle: use permanent connections to Moodle DB
- iw_moodle: fixed error when default location contains aphostrofes
- Added support for different DB server for each school
- Database name is not build using server prefix (usu) and activedId. Don't use serviceDB cause is duplicated info.


Changes 11.09.21
---------------------------------------------------------------------------------------
GENERAL
- Added diskUsageZk.txt and diskUsageMdl.txt to checkFiles script

PORTAL
- Hardcoded parameters are now loaded from general config files
- Removed info shown when a school is not present in web service to not foolish some users
- Removed link to new service when school has all services
- Fixed problem during intranets activation due a wrong parameter for a variable in downloads module
- Added ability to send warning email near or over the disk usage limit (disabled feature)
- Number of rows configurable in services administration
- Several improvements to updateDiskUse() function

ZIKULA
- Hardcoded param in site-config is now read from general config/config.php

MOODLE
- Home of the diskquote viewer shows real data instead of stored data
- Updated marsupial module to version 1.4-beta
- Updated marsupial-atria module to version 1.5


Changes 11.09.14
---------------------------------------------------------------------------------------
GENERAL
- Added index.php to html/config to simulate access forbidden
- dblib-mysql: added opendb call to fix not checking Moodle DB's
- Added checkFiles.php script to check creation date of some autoregenerated files
- Fixed config file to be loaded in apc.php
- Fixed works.php which was foolished by usu10000 and higher

PORTAL
- Updated Zikula to 1.2.8

MOODLE
- Fixed some bugs related with images of the "senzill" format course
- In "disk space viewer" categories contains subcategories size too
- Removed extra security checks in index_iw.php to avoid problems with SSO and marsupial

ZIKULA
- Updated Zikula to 1.2.8


Changes 11.09.08
